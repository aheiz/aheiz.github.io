var NSWebViewinterface=function(){function e(){this.eventListenerMap={},this._iosResponseMap={},this._iosCntResponseId=0}return e.prototype._onNativeEvent=function(e,t){for(var n=this.eventListenerMap[e]||[],o=0;o<n.length;o++){var i=n[o];if(!1===(i&&i(t)))break}},e.prototype._callJSFunction=function(e,t,n){var o=this,i=o._getResolvedFunction(t);if(i){var s=i.apply(window,n);s&&s.then?s.then((function(t){o._sendJSCallResponse(e,t)}),(function(t){o._sendJSCallResponse(e,t,!0)})):this._sendJSCallResponse(e,s)}},e.prototype._getResolvedFunction=function(e){if(e&&(e=e.trim()).length){for(var t=(e=0===e.indexOf("window.")?e.replace("window.",""):e).split("."),n=window,o=0;o<t.length;o++){if(!n[t[o]]){n=null;break}n=n[t[o]]}return n}},e.prototype._sendJSCallResponse=function(e,t,n){this.emit("_jsCallResponse",{reqId:e,response:t||null,isError:!!n})},e.prototype._createIFrame=function(e){var t=document.documentElement,n=document.createElement("IFRAME");return n.setAttribute("src",e),t.appendChild(n),n},e.prototype._emitEventToIOS=function(e,t){this._iosResponseMap[++this._iosCntResponseId]=t;var n="js2ios:"+JSON.stringify({eventName:e,resId:this._iosCntResponseId}),o=this._createIFrame(n);o.parentNode.removeChild(o)},e.prototype._getIOSResponse=function(e){var t=this._iosResponseMap[e];return delete this._iosResponseMap[e],t},e.prototype._emitEventToAndroid=function(e,t){window.androidWebViewInterface.handleEventFromWebView(e,t)},e.prototype.on=function(e,t){(this.eventListenerMap[e]||(this.eventListenerMap[e]=[])).push(t)},e.prototype.emit=function(e,t){var n="object"==typeof t?JSON.stringify(t):t;window.androidWebViewInterface?this._emitEventToAndroid(e,n):this._emitEventToIOS(e,n)},e}();window.nsWebViewInterface=new NSWebViewinterface;